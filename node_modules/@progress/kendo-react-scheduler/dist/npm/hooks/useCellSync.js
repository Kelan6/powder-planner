"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useCellSync = void 0;
var React = require("react");
var utils_1 = require("../views/common/utils");
var utils_2 = require("../views/common/utils");
/** @hidden */
var useCellSync = function (args, inputs) {
    var element = args.element;
    var syncWidth = function () {
        if (!element || !element.current) {
            return;
        }
        var widest = [];
        var biggestPadding = [];
        var biggestBorder = [];
        var elements = element.current.querySelectorAll(args.selector);
        elements.forEach(function (el) {
            var width = el.getBoundingClientRect().width;
            var level = (args.explicitDepth && args.attribute !== undefined ? el.getAttribute(args.attribute) : 0);
            var padding = (0, utils_1.getPadding)(el, true);
            var border = (0, utils_2.getBorders)(el, true);
            if (level === null) {
                return;
            }
            if (!biggestBorder[level] || border > biggestBorder[level]) {
                biggestBorder[level] = border;
            }
            if (!biggestPadding[level] || padding > biggestPadding[level]) {
                biggestPadding[level] = padding;
            }
            if (!widest[level] || width > widest[level]) {
                widest[level] = width;
            }
        });
        elements.forEach(function (el) {
            var level = args.explicitDepth ? el.getAttribute(args.attribute) : 0;
            if (level === null) {
                return;
            }
            el.style.minWidth = "".concat(widest[level] - biggestPadding[level] - biggestBorder[level], "px");
        });
    };
    React.useLayoutEffect(syncWidth, inputs);
};
exports.useCellSync = useCellSync;
