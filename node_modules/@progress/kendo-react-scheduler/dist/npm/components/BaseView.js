"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BaseView = void 0;
var React = require("react");
var hooks_1 = require("../hooks");
var kendo_react_common_1 = require("@progress/kendo-react-common");
var SchedulerViewContext_1 = require("../context/SchedulerViewContext");
var use_items_selection_1 = require("../hooks/use-items-selection");
var use_slots_selection_1 = require("../hooks/use-slots-selection");
var kendo_react_common_2 = require("@progress/kendo-react-common");
/**
 * @hidden
 */
exports.BaseView = React.forwardRef(function (props, ref) {
    var element = React.useRef(null);
    React.useImperativeHandle(ref, function () { return element.current; });
    var _a = (0, kendo_react_common_2.useCollection)([]), items = _a[0], dispatchItems = _a[1];
    var _b = (0, kendo_react_common_2.useCollection)([]), slots = _b[0], dispatchSlots = _b[1];
    var _c = (0, hooks_1.useItemsFocus)(items), focusedItems = _c[0], dispatchFocusedItems = _c[1];
    var _d = (0, hooks_1.useSlotsFocus)(slots), focusedSlots = _d[0], dispatchFocusedSlots = _d[1];
    var _e = (0, use_items_selection_1.useItemsSelection)(items), selectedItems = _e[0], dispatchSelectedItems = _e[1];
    var _f = (0, use_slots_selection_1.useSlotsSelection)(slots), selectedSlots = _f[0], dispatchSelectedSlots = _f[1]; // React.useState<React.RefObject<SchedulerSlotHandle>[]>([]);
    var handleSchedulerItemsSelectAction = React.useCallback(function (action, event) {
        dispatchSelectedSlots({ type: use_slots_selection_1.SLOTS_SELECT_ACTION.reset });
        dispatchSelectedItems(action, event);
    }, [dispatchSelectedItems, dispatchSelectedSlots]);
    var handleSchedulerSlotsSelectAction = React.useCallback(function (action, event) {
        dispatchSelectedItems({ type: use_items_selection_1.ITEMS_SELECT_ACTION.reset }, event);
        dispatchSelectedSlots(action);
    }, [dispatchSelectedItems, dispatchSelectedSlots]);
    var className = React.useMemo(function () { return (0, kendo_react_common_1.classNames)('k-scheduler-layout k-scheduler-layout-flex', props.className); }, [props.className]);
    (0, hooks_1.useCellSync)({ element: element, selector: '.k-group-cell', attribute: 'data-depth-index', explicitDepth: true });
    (0, hooks_1.useCellSync)({ element: element, selector: '.k-side-cell', attribute: 'data-depth-index', explicitDepth: false });
    return (React.createElement(SchedulerViewContext_1.SchedulerViewContext, { props: props.props, ranges: props.ranges, items: [items, dispatchItems], slots: [slots, dispatchSlots], selectedItems: [selectedItems, handleSchedulerItemsSelectAction], selectedSlots: [selectedSlots, handleSchedulerSlotsSelectAction], focusedItems: [focusedItems, dispatchFocusedItems], focusedSlots: [focusedSlots, dispatchFocusedSlots] },
        React.createElement("div", { ref: element, style: props.style, className: className, role: "presentation" }, props.children)));
});
exports.BaseView.displayName = 'KendoReactSchedulerBaseView';
